---
title: "JSONData"
author: "Sejin Lim"
date: "June 8, 2019"
output:   
  html_document:  
    toc: yes  
    toc_float: yes  
    
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## About JSON


In computing, **JavaScript Object Notation (JSON)** is an open-standard file format that uses human-readable text to transmit data objects consisting of attribute–value pairs and array data types (or any other serializable value). It is a very common data format used for asynchronous browser–server communication, including as a replacement for XML in some AJAX-style systems. For more detail see <https://en.wikipedia.org/wiki/JSON>  


### Benefits  

JSON offers the same kind of benefits that XML does for exchanging data in a heterogeneous environment, such as the following:  
  
  * **JSON is self-describing.** The syntax and hierachical sturucter of the JSON strings can in some cases be interpreted by applications that do not already know what data to expect.  
  * **JSON is simple text.** This fact makes it suitable and safe for transferring across platforms and operating systems that do not readily share more complex document types. As text, JSON can also be readily displayed and edited in simple editors.  
  * **JSON is compact.** An avearage JSON string is about two thirds of the size of the same data in XML.  
  * **JSON is easy.** It is easy to learn, easy to read, and easy to understand.


### Data types and syntax

Because JSON is designed to be lightweight, it supports only four primitive data types : string, number, boolean, and null. 


JSON looks like below.(from wikipedia)  

```{r graphics, out.width="400px", echo=FALSE }
knitr::include_graphics("jsonWiki.png")
```


## Read JSON in R

To read JSON data type, we need to install some pacakage such as `jsonlite`. Then using `fromJSON` function, we can read the data easily. 
For the practice, bring JSON data sample from <https://catalog.data.gov/dataset/age-adjusted-death-rates-for-the-top-10-leading-causes-of-death-united-states-2013>. 


```{r, echo=TRUE, warning=FALSE}
## install.package("jsonlite")
library(jsonlite)

data<-fromJSON("ProjectData.json")
subdata<- data.frame(data$data[,c(9,11,12,13)])
colnames(subdata) <- c("Year", "Cause", "State", "Deaths") 

subdata$Deaths <- as.numeric(subdata$Death)
str(subdata)

```

## Analysis

```{r echo=FALSE, include =FALSE, results = 'hide'}
library(DT)
library(tidyverse)
library(dplyr)
```

###Top causes of death in North Carolina 2016
```{r echo=FALSE, include =FALSE, results = 'hide'}
#Change the State and Cause columns from factors to characters.
subdata$State <- as.character(subdata$State)
subdata$Cause <- as.character(subdata$Cause)

#Filter for 2016 and NC then sort by death in descending order.
subdata2016 <- filter(subdata, Year == 2016)
subdata2016NC <- filter(subdata2016, State == "North Carolina")
subdata2016NC <- subdata2016NC %>% arrange(desc(Deaths))
NC2016 <- subdata2016NC %>% select(Cause, Deaths)

#Data set with Alzheimer's disease or no Alzheimer's disease during 2014 to 2016, in NC, NY, or Ca. 
subdata$Cause <- ifelse(subdata$Cause != "Alzheimer's disease", 'No Alzheimers disease', 'Alzheimers disease')
subdata1 <- filter(subdata, Year == 2014 | Year == 2015  | Year == 2016)
subdata1 <- filter(subdata1, State == "North Carolina" | State =="New York" | State =="California")

```

### Numeric Summaries  

```{r, echo=FALSE}
#data table with the 2016 NC top causes of death
knitr::kable(NC2016, caption= "Top Causes of Death in North Carolina in the Year 2016")

datatable(subdata1)
```

### Visual Summaires
```{r, echo=FALSE}
#Graph of 2016 NC top 5 deaths 
NC2016 <- NC2016[1:5, ]
Plot1 <- ggplot(NC2016, aes(x = Cause, y = Deaths))
Plot1 + geom_bar(stat = "identity", fill="steelblue")

#Side-by-side bar plot of Alzheimer's disease during 2014 to 2016, in NC, NY, or Ca. 
ggplot(subdata1, aes(x = Year)) + geom_bar(aes(fill = Cause), position = "dodge") + facet_wrap( ~ State, labeller = label_both) + xlab("Female Crab Color") + scale_fill_discrete(name = "")
```